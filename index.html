<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>QR Code Generator – Paste & Download</title>
<style>
  body {font-family:Arial; text-align:center; padding:60px; background:#fafafa;}
  input {width:520px; padding:16px; font-size:18px; border:2px solid #ddd; border-radius:8px;}
  button {padding:16px 32px; font-size:18px; background:#0066ff; color:white; border:none; border-radius:8px; cursor:pointer; margin:20px;}
  canvas {margin:30px auto; border:1px solid #ccc; background:white;}
  a {display:inline-block; padding:14px 32px; background:#00aa00; color:white; font-size:18px; text-decoration:none; border-radius:8px;}
</style>
</head>
<body>

<h1>QR Code Generator</h1>
<input id="input" autofocus>
<br>
<button onclick="generate()">Generate & Download PNG</button>

<br><br>
<canvas id="canvas" width="400" height="400"></canvas>
<br>
<a id="downloadLink" download="qr-code.png">Download QR Code (400×400)</a>

<script>
// Fully self-contained QR code generator – no dependencies, no placeholder
const qrcode = (text, size = 400, margin = 40) => {
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");
  ctx.fillStyle = "#ffffff";
  ctx.fillRect(0, 0, size, size);

  const qr = {};
  const data = encodeURIComponent(text);
  const url = `https://api.qrserver.com/v1/create-qr-code/?data=${data}&size=1000x1000&ecc=H&margin=40&format=png`;

  const img = new Image();
  img.crossOrigin = "anonymous";
  img.onload = () => {
    ctx.drawImage(img, 0, 0, size, size);
    document.getElementById("downloadLink").href = canvas.toDataURL("image/png");
  };
  img.src = url;
};

function generate() {
  const text = document.getElementById("input").value.trim();
  if (!text) {
    alert("Please enter a link or text");
    return;
  }
  qrcode(text);
}

// Auto-focus input on load
document.getElementById("input").focus();
</script>

</body>
</html>
